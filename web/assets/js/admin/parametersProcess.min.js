$(document).ready(function(){$(".param").unbind("change").bind("change",function(){var parameterId=$(this).attr("data-id");var value=$(this).val();var label=$(this).attr("data-label");$.ajax({url:"/tdb-admin/parameter/put/"+parameterId,method:"PUT",data:{label:label,value:value},success:function(result){$("#responseMessageContent").fadeIn(250).removeClass("hidden");$("#responseMessage").html(result.message);setTimeout(function(){$("#responseMessageContent").fadeOut(250)},5e3)},error:function(error){}})});var imageInput=$("#parameterValue5");if(imageInput.length!==0){loadImageGenProcess(imageInput,function(){var widthInput=$("#widthInput");var heightInput=$("#heightInput");var imageResizer=$("#imageResizer");var numberInput=$(".numberInput");numberInput.unbind("change").bind("change",function(e){e.preventDefault();var width=widthInput.val();var height=heightInput.val();getImageValue(imageResizer,width,height,function(resp){var array='{ "width": '+width+', "height": '+height+', "emptyImageString": "'+resp+'" }';$.ajax({url:"/tdb-admin/parameter/putValue/"+imageInput.data("id"),method:"PUT",data:{value:array}}).done(function(response){$("#responseMessageContent").fadeIn(250).removeClass("hidden");$("#responseMessage").html(response.message);setTimeout(function(){$("#responseMessageContent").fadeOut(250)},5e3)})})})})}function getImageValue(imageResizer,width,height,callback){imageResizer.show();$uploadCrop=imageResizer.croppie({enableExif:true,viewport:{width:width,height:height,type:"square"},boundary:{width:300,height:300}});$uploadCrop.croppie("result",{type:"canvas",size:"viewport"}).then(function(resp){callback(resp)});imageResizer.hide()}function loadImageGenProcess(imageInput,callback){imageInput.hide();var imageData=JSON.parse(imageInput.val());var widthValue=imageData.width;var heightValue=imageData.height;var contentDiv=imageInput.parent();var divRow=document.createElement("div");divRow.className="row";var inputWidthHeightHolder=document.createElement("div");inputWidthHeightHolder.className="col-md-12";var imageResizerHolder=document.createElement("div");imageResizerHolder.className="col-md-12";var rowWarning=document.createElement("div");rowWarning.className="row";var alertContentMd=document.createElement("div");alertContentMd.className="col-md-12";var alertContent=document.createElement("div");alertContent.className="alert alert-warning";var alertMessage=document.createElement("p");alertMessage.innerHTML="<i class='fa fa-warning'></i>&nbspAttention, tout changement de largeur et/ou de hauteur n'affecte pas les images déjà ajouté !";alertMessage.style.color="";var widthInput=document.createElement("input");widthInput.className="form-control numberInput";widthInput.type="number";widthInput.value=widthValue;widthInput.id="widthInput";var heightInput=document.createElement("input");heightInput.className="form-control numberInput";heightInput.type="number";heightInput.value=heightValue;heightInput.id="heightInput";var widthMd=document.createElement("div");widthMd.className="col-md-12";var heightMd=document.createElement("div");heightMd.className="col-md-12";var widthLabel=document.createElement("label");widthLabel.innerHTML="Largeur: ";widthLabel.className="param-title";var heightLabel=document.createElement("label");heightLabel.innerHTML="Hauteur: ";heightLabel.className="param-title";var imageResizer=document.createElement("div");imageResizer.id="imageResizer";imageResizerHolder.appendChild(imageResizer);alertContent.appendChild(alertMessage);alertContentMd.appendChild(alertContent);rowWarning.appendChild(alertContentMd);widthMd.appendChild(widthLabel);widthMd.appendChild(widthInput);heightMd.appendChild(heightLabel);heightMd.appendChild(heightInput);rowWarning.appendChild(widthMd);rowWarning.appendChild(heightMd);inputWidthHeightHolder.appendChild(rowWarning);divRow.appendChild(inputWidthHeightHolder);divRow.appendChild(imageResizerHolder);contentDiv.append(divRow);callback()}});