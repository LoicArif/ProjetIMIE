function PageTransionner(){this.main=$("#pt-main");this.pages=this.main.children("div.pt-page");this.pagesCount=this.pages.length;this.current=0;this.isAnimating=false;this.endCurrPage=false;this.endNextPage=false;this.animEndEventNames={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"};this.animEndEventName=this.animEndEventNames[Modernizr.prefixed("animation")];this.support=Modernizr.cssanimations;this.init=function(){var that=this;this.pages.each(function(){var $page=$(this);$page.data("originalClassList",$page.attr("class"))});this.pages.eq(this.current).removeClass("hidden");$("#nextButton").unbind("click").bind("click",function(){that.nextPage()})};this.nextPage=function(callback){var that=this;if(this.isAnimating){return false}this.isAnimating=true;var $currPage=this.pages.eq(this.current);if(this.current<this.pagesCount-1){++this.current}else{this.current=0}var $nextPage=this.pages.eq(this.current).removeClass("hidden");$currPage.addClass("pt-page-rotateSlideOut").on(this.animEndEventName,function(){$currPage.off(that.animEndEventName);that.endCurrPage=true;if(that.endNextPage){that.onEndAnimation($currPage,$nextPage)}});$nextPage.addClass("pt-page-rotateSlideIn").on(this.animEndEventName,function(){$nextPage.off(that.animEndEventName);that.endNextPage=true;if(that.endCurrPage){that.onEndAnimation($currPage,$nextPage)}});if(!this.support){this.onEndAnimation($currPage,$nextPage)}callback()};this.onEndAnimation=function($outpage,$inpage){this.endCurrPage=false;this.endNextPage=false;this.resetPage($outpage,$inpage);this.isAnimating=false};this.resetPage=function($outpage,$inpage){$outpage.attr("class","pt-page hidden");$outpage.attr("data-active",false);$inpage.attr("class","pt-page");$inpage.attr("data-active",true)};this.init()}